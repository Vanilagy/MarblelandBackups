package GemShrink {
  function Gem::onPickup(%this,%obj,%user,%amount) {
    Parent::onPickup(%this,%obj,%user,%amount);
    %user.setCollisionRadius(%user.getCollisionRadius() * 0.9);
  }
};

function serverCbOnMissionLoaded() {
    activatePackage(GemShrink);
}

function serverCbOnMissionEnded() {
    deactivatePackage(GemShrink);
}

//--- OBJECT WRITE BEGIN ---
new SimGroup(MissionGroup) {

   new ScriptObject(MissionInfo) {
         artist = "LaSharkus";
         customRadarRule = "0";
         desc = "WARNING: Gems seem to be causing mass shrinkage. Marbles beware!";
         game = "PlatinumQuest";
         gameMode = "null";
         generalHint = "Shrinking the ball means that you will have less friction and less stopping time.";
         level = "1333";
         music = "Racing Forever.ogg";
         name = "Shrinkage";
         platinumTime = "120000";
         radar = "1";
         startHelpText = "When you have all of the gems, fall into the tiny hole in the middle of the white.";
         trivia = "Special thanks to Keppy for showing me this code.";
         type = "Custom";
         ultimateHint = "I\'d recommend going purple, red, yellow, in that order.";
         ultimateTime = "75000";
   };
   new MissionArea(MissionArea) {
      area = "-360 -648 720 1296";
      flightCeiling = "300";
      flightCeilingRange = "20";
         locked = "true";
   };
   new Sky(Sky) {
      position = "336 136 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      materialList = "~/data/skies_pq/Blender3/blender3.dml";
      cloudHeightPer[0] = "0";
      cloudHeightPer[1] = "0";
      cloudHeightPer[2] = "0";
      cloudSpeed1 = "0.0001";
      cloudSpeed2 = "0.0002";
      cloudSpeed3 = "0.0003";
      visibleDistance = "500";
      fogDistance = "300";
      fogColor = "0.6 0.6 0.6 1";
      fogStorm1 = "0";
      fogStorm2 = "0";
      fogStorm3 = "0";
      fogVolume1 = "-1 7.45949e-31 1.3684e-38";
      fogVolume2 = "-1 1.07208e-14 8.756e-14";
      fogVolume3 = "-1 5.1012e-10 2.05098e-08";
      fogVolumeColor1 = "128 128 128 0";
      fogVolumeColor2 = "128 128 128 4e-06";
      fogVolumeColor3 = "128 128 128 1.44355e+07";
      windVelocity = "1 0 0";
      windEffectPrecipitation = "0";
      SkySolidColor = "0.6 0.6 0.6 1";
      useSkyTextures = "1";
      renderBottomTexture = "1";
      noRenderBans = "1";
   };
   new Sun() {
      direction = "0.638261 0.459006 -0.61801";
      color = "1 1 0.4 1";
      ambient = "0.3 0.3 0.4 1";
   };
   new SimGroup(PathNodeGroup) {

      new StaticShape(CameraPath1) {
         position = "-0.365779 5.505 19.0291";
         rotation = "2.33264e-06 0.98643 -0.164182 180";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath2";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath2) {
         position = "-8.01944 6.77085 18.1833";
         rotation = "0.178383 0.970609 -0.161549 189.21";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath3";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath3) {
         position = "-14.5079 10.3757 15.7745";
         rotation = "0.353187 0.922857 -0.153601 198.122";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath4";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath4) {
         position = "-32.0153 9.13379 12.0575";
         rotation = "0.520122 0.842502 -0.140226 206.433";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath5";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath5) {
         position = "-28.2907 22.2295 6.25976";
         rotation = "0.673607 0.72906 -0.121345 213.835";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath6";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath6) {
         position = "-25.4401 30.6153 4.83759";
         rotation = "0.806483 0.583234 -0.0970732 220.019";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath7";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath7) {
         position = "-15.55 37.8473 4.10273";
         rotation = "0.910388 0.408141 -0.0679311 224.692";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath8";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath8) {
         position = "-9.12282 45.7543 5.21326";
         rotation = "0.977002 0.210336 -0.0350086 227.609";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath9";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath9) {
         position = "-0.365684 44.1157 5.85683";
         rotation = "1 -9.92358e-07 1.03013e-07 228.602";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath10";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath10) {
         position = "8.1953 44.2864 3.86903";
         rotation = "0.977002 -0.210338 0.0350084 227.609";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath11";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath11) {
         position = "14.8639 38.0192 4.27854";
         rotation = "0.910387 -0.408143 0.0679317 224.692";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath12";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath12) {
         position = "19.5327 32.2094 8.16056";
         rotation = "0.806478 -0.58324 0.0970749 220.018";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath13";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath13) {
         position = "19.6343 22.1342 7.91759";
         rotation = "-0.673603 0.729064 -0.121346 146.165";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath14";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath14) {
         position = "18.1119 15.7705 12.1698";
         rotation = "-0.520122 0.842502 -0.140226 153.567";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath15";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath15) {
         position = "13.7763 10.3755 15.7747";
         rotation = "-0.353184 0.922859 -0.153601 161.878";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath16";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
      new StaticShape(CameraPath16) {
         position = "7.28783 6.77081 18.1833";
         rotation = "-0.178378 0.97061 -0.161548 170.79";
         scale = "1 1 1";
         dataBlock = "PathNode";
            bezier = "0";
            branchNodes = " ";
            delay = "0";
            FinalRotOffset = "0 0 0";
            nextNode = "CameraPath1";
            placed = "1";
            reverseRotation = "0";
            RotationMultiplier = "1";
            smooth = "0";
            SmoothEnd = "0";
            SmoothStart = "0";
            speed = "0";
            Spline = "0";
            timeToNext = "4000";
            usePosition = "1";
            useRotation = "1";
            useScale = "1";
      };
   };
   new Item() {
      position = "0.477309 -6.43947 -3.48979";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "GemItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "0.538783 22.608 2.51021";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "GemItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "0.483522 8.53222 0.510209";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "GemItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new ScriptObject() {
         artist = "LaSharkus";
         awesomeHint = "Help an experienced player master your level!";
         customRadarRule = "0";
         desc = "WARNING: Gems seem to be causing mass shrinkage. Marbles beware!";
         easterEgg = "0";
         eastereggHint = "Don\'t fill out this field for PQ levels. Easter Eggs are in the other games!";
         eggHint = "Help the player find the Nest Egg! If you choose to place one, of course.";
         file = "platinum/data/missions/custom/Shrinkage.mis";
         game = "PlatinumQuest";
         gems = "5";
         generalHint = "Help the player beat your level!";
         interior0 = "~/data/interiors_mbg/advanced/platform_circle_huge.dif";
         interiors = "1";
         level = "1333";
         modification = "PlatinumQuest";
         music = "Racing Forever.ogg";
         name = "Shrinkage";
         partial = "0";
         radar = "1";
         startHelpText = "Change this text!";
         trivia = "Share some fun trivia about this level!";
         type = "Custom";
         ultimateHint = "Help the player beat your level fast!";
   };
   new ScriptObject() {
         artist = "LaSharkus";
         awesomeHint = "Help an experienced player master your level!";
         customRadarRule = "0";
         desc = "WARNING: Gems seem to be causing mass shrinkage. Marbles beware!";
         easterEgg = "1";
         eastereggHint = "Don\'t fill out this field for PQ levels. Easter Eggs are in the other games!";
         eggHint = "Help the player find the Nest Egg! If you choose to place one, of course.";
         file = "platinum/data/missions/custom/Shrinkage.mis";
         game = "PlatinumQuest";
         gems = "5";
         generalHint = "Help the player beat your level!";
         interior0 = "~/data/interiors_mbp/RampsLonestar.dif";
         interior1 = "~/data/lbinteriors_custom/pq/unused/Exoorangering.dif";
         interiors = "2";
         level = "1333";
         modification = "PlatinumQuest";
         music = "Racing Forever.ogg";
         name = "Shrinkage";
         partial = "0";
         radar = "1";
         startHelpText = "Change this text!";
         trivia = "Share some fun trivia about this level!";
         type = "Custom";
         ultimateHint = "Help the player beat your level fast!";
   };
   new ScriptObject() {
         artist = "LaSharkus";
         awesomeHint = "Help an experienced player master your level!";
         customRadarRule = "0";
         desc = "WARNING: Gems seem to be causing mass shrinkage. Marbles beware!";
         easterEgg = "1";
         eastereggHint = "Don\'t fill out this field for PQ levels. Easter Eggs are in the other games!";
         eggHint = "Help the player find the Nest Egg! If you choose to place one, of course.";
         file = "platinum/data/missions/custom/Shrinkage.mis";
         game = "PlatinumQuest";
         gems = "5";
         generalHint = "Help the player beat your level!";
         interior0 = "~/data/interiors_mbp/RampsLonestar.dif";
         interior1 = "~/data/lbinteriors_custom/pq/unused/Exoorangering.dif";
         interior2 = "~/data/interiors/mbgyellow_2x2_holemiddle.dif";
         interiors = "3";
         level = "1333";
         modification = "PlatinumQuest";
         music = "Racing Forever.ogg";
         name = "Shrinkage";
         partial = "0";
         radar = "1";
         startHelpText = "Change this text!";
         trivia = "Share some fun trivia about this level!";
         type = "Custom";
         ultimateHint = "Help the player beat your level fast!";
   };
   new InteriorInstance() {
      position = "-2.56261 5.60418 -4.53979";
      rotation = "0 0 -1 90.0002";
      scale = "1 1 1";
      interiorFile = "~/data/interiors_mbg/custom/shrinkage.dif";
      useGLLighting = "0";
      showTerrainInside = "0";
   };
   new Item() {
      position = "-15.5305 22.6242 21.5102";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "GemItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "-21.5722 22.5856 10.5102";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "GemItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "43.4536 22.6773 3.11021";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "GemItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "45.3918 24.642 3.26021";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SuperJumpItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "0.415371 50.7144 0.510208";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "GemItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "0.425307 62.4198 0.510209";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "GemItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "0.40739 56.446 0.960209";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "TimeTravelItem";
      collidable = "0";
      static = "1";
      rotate = "1";
         skin = "base";
         timeBonus = "5000";
   };
   new Item() {
      position = "18.4422 22.5668 4.40521";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SuperBounceItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "-6.51062 29.1068 -5.48979";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "GemItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "-6.59062 16.2107 -5.48979";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "GemItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "7.43965 16.2468 -5.48979";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "GemItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "7.50687 29.1156 -5.48979";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "GemItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new Trigger(sandpit) {
      position = "-0.548144 71.5063 -8.93979";
      rotation = "1 0 0 0";
      scale = "2.13478 2.02795 1";
      dataBlock = "TeleportTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         centerDestPoint = "1";
         delay = "0";
         destination = "yellowPath";
         DisplayGemsMessage = "0";
         inverseVelocity = "0";
         keepAngular = "0";
         keepCamera = "1";
         keepVelocity = "1";
         silent = "1";
   };
   new Trigger(yellowPath) {
      position = "-0.111733 31.1206 -5.53979";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "DestinationTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger(finish) {
      position = "-0.575125 23.6164 -11.5398";
      rotation = "1 0 0 0";
      scale = "2 2 1";
      dataBlock = "FinishTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Item() {
      position = "0.346993 22.6034 -5.73979";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "GemItem";
      collidable = "0";
      static = "1";
      rotate = "1";
   };
   new StaticShape() {
      position = "0.471075 22.7282 -2.30576";
      rotation = "1 0 0 0";
      scale = "0.3 0.3 0.3";
      dataBlock = "SignFinish";
   };
   new Trigger(OOB) {
      position = "-106.195 121.751 -78.6968";
      rotation = "1 0 0 0";
      scale = "215.406 190.845 55.045";
      dataBlock = "OutOfBoundsTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new StaticShape(StartPoint) {
      position = "0.467641 -11.597 -3.53754";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "StartPad_MBG";
   };
   new StaticShape() {
      position = "0.437837 70.4776 2.31621";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SignPlainDown";
   };
   new StaticShape() {
      position = "-12.5205 22.6169 4.31621";
      rotation = "0 0 -1 90.0002";
      scale = "1 1 1";
      dataBlock = "SignPlainDown";
   };
   new StaticShape() {
      position = "12.2787 22.5887 4.31621";
      rotation = "0 0 1 89.9996";
      scale = "1 1 1";
      dataBlock = "SignPlainDown";
   };
};
//--- OBJECT WRITE END ---
