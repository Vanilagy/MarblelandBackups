// Credit to Jeff for hacky code

function addToMissionCleanup(%obj)
{
   cancel($addMissionCleanup[%obj.getId()]);
   if (isObject(MissionCleanup))
   {
      MissionCleanup.add(%obj);
      return;
   }
   $addMissionCleanup[%obj.getId()] = schedule(10, 0, addToMissionCleanup, %obj);
}

datablock StaticShapeData(Art1)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/art1.dts";
};

datablock StaticShapeData(Art2)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/art2.dts";
};

datablock StaticShapeData(Art3)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/art3.dts";
};

datablock StaticShapeData(Art4)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/art4.dts";
};

datablock StaticShapeData(Art5)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/art5.dts";
};

datablock StaticShapeData(Art6)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/art6ifl.dts";
};

function Art6::onAdd(%this,%obj)
{
	%obj.playThread(0,"waterfall");
}

datablock StaticShapeData(Art7)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/art7.dts";
};

datablock StaticShapeData(Art8)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/art8.dts";
};

datablock StaticShapeData(Art9)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/art9.dts";
};

datablock StaticShapeData(Art10)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/art10.dts";
};

datablock StaticShapeData(Art11)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/art11.dts";
};

datablock StaticShapeData(Art12)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/art12.dts";
};

datablock StaticShapeData(ArtE1)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/arte1.dts";
};

datablock StaticShapeData(ArtE2)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/arte2.dts";
};

datablock StaticShapeData(ArtE3)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/arte3.dts";
};

datablock StaticShapeData(ArtE4)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/arte4.dts";
};

datablock StaticShapeData(ArtE5)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/arte5.dts";
};

datablock StaticShapeData(ArtE6)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/arte6.dts";
};

datablock StaticShapeData(ArtGate)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/art_gate.dts";
};

datablock StaticShapeData(Tunnel)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/magictunnel.dts";
};

datablock StaticShapeData(Arch)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/arch.dts";
};

datablock AudioProfile(WhirlwindSfx)
{
   filename    = "./art/whirlwind.wav";
   description = AudioClosestLooping3d;
   preload = true;
};

datablock StaticShapeData(Whirlwind)
{
   category = "Hazards";
   shapeFile = "./art/whirlwind.dts";
   scopeAlways = true;

   forceType[0] = Field;
   forceVector[0] = "0 0 3";
   forceStrength[0] = 21;
   forceRadius[0] = 3;
};

function Whirlwind::onAdd(%this,%obj)
{
   %obj.playThread(0,"spin");
   %obj.playAudio(0,WhirlwindSfx);
   %obj.setPoweredState(true);
}

datablock StaticShapeData(StonePad)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/stonepad.dts";
};

datablock StaticShapeData(StonePad2)
{
   className = "DTS Interior";
   category = "DTS Interiors";
   shapeFile = "./art/stonepad2.dts";
};

function StonePad::onAdd(%this,%obj)
{
   %obj.activated = 0;
   %obj.pad2 = new StaticShape() {
		position = %obj.position;
		rotation = %obj.rotation;
		scale = %obj.scale;
		datablock = "StonePad2";
   };
   %obj.pad2.hide(1);

   addToMissionCleanup(%obj.pad2);
   if (!isObject(StonePadSet)) {
		new SimSet(StonePadSet);
   }
   StonePadSet.add(%obj);
}

datablock AudioProfile(GateDropSfx)
{
   filename    = "./art/rumble.wav";
   description = AudioClose3d;
   preload = true;
};

function StonePad::onCollision(%this,%obj,%col)
{
	if (!%obj.activated) {
		%obj.activated = 1;
		$stonePadsActivated++;
		if ($stonePadsActivated >= 5) {
			colorOn(0);
			TheGate.playThread(0,"drop");
			TheGate.playAudio(0,GateDropSfx);
		}
	}
}

function colorOn(%k) {
	for (%i=0;%i<StonePadSet.getCount();%i++) {
		%obj = StonePadSet.getObject(%i);
		%obj.hide(1);
		%obj.pad2.hide(0);
	}
	schedule(500,0,"colorOff",%k);
}

function colorOff(%k) {
	for (%i=0;%i<StonePadSet.getCount();%i++) {
		%obj = StonePadSet.getObject(%i);
		%obj.hide(0);
		%obj.pad2.hide(1);
	}
	if (%k < 4)
		schedule(500,0,"colorOn",%k+1);
}

datablock TriggerData(QuickTPTrigger)
{
   tickPeriodMS = 100;
};

function QuickTPTrigger::onEnterTrigger(%this,%trigger,%obj)
{
	pickupEnabled(%obj,0);
	commandToClient(%obj.client,'MarbleTeleport',%trigger.offset);
	schedule((%obj.client.getPing() * 2) + 100,0,"pickupEnabled",%obj,1);
}

datablock AudioProfile(SplashSfx)
{
   filename    = "./art/splash.wav";
   description = Audio2D;
   preload = true;
};

datablock TriggerData(WaterOutOfBoundsTrigger)
{
   tickPeriodMS = 100;
};

function WaterOutOfBoundsTrigger::onEnterTrigger(%this,%trigger,%obj)
{
   Parent::onEnterTrigger(%this,%trigger,%obj);
   // Entering an out of bounds area
   %obj.getDatablock().onOutOfBounds(%obj);
   %obj.client.play2d(SplashSfx);
   %emit = new ParticleEmitterNode() {
      position = %obj.position;
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSplashEmitter";
      velocity = "5";
   };
   %emit.schedule(50,"delete");
}

function pickupEnabled(%obj,%enable)
{
	%obj.noPickup = !%enable;
}

function clientCmdMarbleTeleport(%offset)
{
	ServerConnection.getControlObject().setTransform(VectorAdd(getWords(ServerConnection.getControlObject().getTransform(),0,2),%offset) SPC getWords(ServerConnection.getControlObject().getTransform(),3));
}

datablock ParticleData(WaterSpray) {
   textureName          = "~/data/particles/smoke";
   dragCoefficient      = 1;
   gravityCoefficient   = 0.5;
   inheritedVelFactor   = 0;
   windCoefficient      = 0;
   constantAcceleration = 0;
   lifetimeMS           = 2000;
   lifetimeVarianceMS   = 200;
   spinSpeed     = 0;
   spinRandomMin = -90.0;
   spinRandomMax =  90.0;
   useInvAlpha   = true;

   colors[0]     = "1 1 1 0.8";
   colors[1]     = "1 1 1 0.8";
   colors[2]     = "1 1 1 0.8";

   sizes[0]      = 1.00;
   sizes[1]      = 1.00;
   sizes[2]      = 1.00;

   times[0]      = 0.0;
   times[1]      = 0.2;
   times[2]      = 1.0;
};

datablock ParticleEmitterData(WaterSprayEmitter) {
   ejectionPeriodMS = 50;
   periodVarianceMS = 0;
   ejectionVelocity = 1;
   velocityVariance = 0.2;
   ejectionOffset   = 0.75;
   thetaMin         = 0;
   thetaMax         = 90;
   phiReferenceVel  = 0;
   phiVariance      = 360;
   //overrideAdvances = false;
   //orientParticles  = true;
   lifetimeMS       = 0;
   particles = "WaterSpray";
};

datablock ParticleData(WaterSplash) {
   textureName          = "~/data/particles/smoke";
   dragCoefficient      = 1;
   gravityCoefficient   = 1;
   inheritedVelFactor   = 0;
   windCoefficient      = 0;
   constantAcceleration = 0;
   lifetimeMS           = 2000;
   lifetimeVarianceMS   = 200;
   spinSpeed     = 0;
   spinRandomMin = -90.0;
   spinRandomMax =  90.0;
   useInvAlpha   = true;

   colors[0]     = "0.8 0.9 1 1";
   colors[1]     = "0.8 0.9 1 0.5";
   colors[2]     = "0.8 0.9 1 0.0";

   sizes[0]      = 0.3;
   sizes[1]      = 0.3;
   sizes[2]      = 0.3;

   times[0]      = 0.0;
   times[1]      = 0.2;
   times[2]      = 1.0;
};

datablock ParticleEmitterData(WaterSplashEmitter) {
   ejectionPeriodMS = 4;
   periodVarianceMS = 0;
   ejectionVelocity = 5;
   velocityVariance = 0.2;
   ejectionOffset   = 0.75;
   thetaMin         = 0;
   thetaMax         = 30;
   phiReferenceVel  = 0;
   phiVariance      = 360;
   //overrideAdvances = false;
   //orientParticles  = true;
   lifetimeMS       = 0;
   particles = "WaterSplash";
};

datablock AudioProfile(WaterSpraySfx)
{
   filename    = "./art/water.wav";
   description = AudioCloseLooping3d;
   preload = true;
};

datablock StaticShapeData(WaterSprayAud)
{
   category = "Effects";
   shapeFile = "./art/arch.dts";
   scopeAlways = true;

   forceType[0] = Field;
   forceVector[0] = "0 0 -3";
   forceStrength[0] = 100;
   forceRadius[0] = 2;
};

function WaterSprayAud::onAdd(%this,%obj)
{
   %obj.playAudio(0,WaterSpraySfx);
   %obj.setPoweredState(true);
}

//--- OBJECT WRITE BEGIN ---
new SimGroup(MissionGroup) {

   new ScriptObject(MissionInfo) {
         score1 = "0";
         type = "Custom";
         ultimateScore0 = "0";
         maxGemsPerSpawn = "6";
         platinumScore1 = "0";
         gemGroups = "1";
         Gamemode = "Hunt";
         name = "Marble Artisans";
         radiusFromGem = "50";
         alarmStartTime = "25";
         time = "300000";
         platinumScore0 = "0";
         score0 = "0";
         desc = "In this nostalgic level, hunt for the gems in the Artisan home world from the classic PSX game, Spyro the Dragon.\n\nLevel and textures by Insomniac Games, 1998\nConverted by Whirligig231, with help from Jeff, HiGuy, Kly_Men_COmpany\nMusic by Stewart Copeland\nSome SFX by Universal Sound";
         Game = "Custom";
         overviewHeight = "15";
         ultimateScore1 = "0";
         artist = "Insomniac Games";
         music = "@art";
         level = "3";
   };
   new MissionArea(MissionArea) {
      area = "-360 -648 720 1296";
      flightCeiling = "300";
      flightCeilingRange = "20";
         locked = "true";
   };
   new Sky(Sky) {
      position = "336 136 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      cloudHeightPer[0] = "0";
      cloudHeightPer[1] = "0";
      cloudHeightPer[2] = "0";
      cloudSpeed1 = "0.0001";
      cloudSpeed2 = "0.0002";
      cloudSpeed3 = "0.0003";
      visibleDistance = "1000";
      useSkyTextures = "1";
      renderBottomTexture = "1";
      SkySolidColor = "0.600000 0.600000 0.600000 1.000000";
      fogDistance = "300";
      fogColor = "0.600000 0.600000 0.600000 1.000000";
      fogVolume1 = "-1 -1.73483e+009 -1.73483e+009";
      fogVolume2 = "-1 -1.73483e+009 -1.73483e+009";
      fogVolume3 = "-1 -1.73483e+009 -1.73483e+009";
      materialList = "./art/sky_art.dml";
      windVelocity = "1 0 0";
      windEffectPrecipitation = "0";
      noRenderBans = "1";
      fogVolumeColor1 = "128.000000 128.000000 128.000000 -1734829824.000000";
      fogVolumeColor2 = "128.000000 128.000000 128.000000 -1734829824.000000";
      fogVolumeColor3 = "128.000000 128.000000 128.000000 -1734829824.000000";
   };
   new Sun() {
      direction = "0.280868 0.579493 -0.76505";
      color = "0.000000 0.000000 0.000000 1.000000";
      ambient = "1.000000 0.900000 0.700000 1.000000";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Art1";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Art2";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Art3";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Art4";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Art5";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Art6";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Art7";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Art8";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Art9";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Art10";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Art11";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Art12";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ArtE1";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ArtE2";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ArtE3";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ArtE4";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ArtE5";
   };
   new StaticShape() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ArtE6";
   };
   new StaticShape(TheGate) {
      position = "-34.75 -9.8 -0.8";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ArtGate";
   };
   new StaticShape() {
      position = "68.1664 0.00539697 -3.65159";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Whirlwind";
   };
   new StaticShape() {
      position = "68.1664 0.00539697 -9.65159";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Whirlwind";
   };
   new StaticShape() {
      position = "-56.89 12.2261 -1.02";
      rotation = "1 0 0 0";
      scale = "1 0.95 0.95";
      dataBlock = "Tunnel";
   };
   new StaticShape() {
      position = "-32.7997 17.1694 -0.340207";
      rotation = "1.90131e-008 -0.0149994 0.999888 180";
      scale = "1.18384 0.979804 1.08243";
      dataBlock = "Arch";
   };
   new StaticShape() {
      position = "106.209 4.49517 1.675";
      rotation = "1 0 0 0";
      scale = "1 0.95 0.95";
      dataBlock = "Tunnel";
   };
   new StaticShape() {
      position = "82.1349 -0.395016 2.5";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "Arch";
   };
   new Trigger(test) {
      position = "-66.9005 23.9 -7.06181";
      rotation = "1 0 0 0";
      scale = "3.77591 11.2872 11.044";
      dataBlock = "QuickTPTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         offset = "163.099 -7.73093 2.695";
   };
   new Trigger(test) {
      position = "112.6 6.4 -4.56181";
      rotation = "1 0 0 0";
      scale = "3.77591 11.2872 11.044";
      dataBlock = "QuickTPTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         offset = "-163.099 7.73093 -2.695";
   };
   new StaticShape() {
      position = "-24.3223 -9.60103 -3.57";
      rotation = "0 0 1 22.5";
      scale = "1.5 1.5 1.5";
      dataBlock = "StonePad";
         activated = "0";
         pad2 = "2051";
   };
   new StaticShape() {
      position = "-24.4864 -5.67051 -3.57";
      rotation = "0 0 1 22.5";
      scale = "1.5 1.5 1.5";
      dataBlock = "StonePad";
         activated = "0";
         pad2 = "2054";
   };
   new StaticShape() {
      position = "-24.3595 -13.5397 -3.57";
      rotation = "0 0 1 22.5";
      scale = "1.5 1.5 1.5";
      dataBlock = "StonePad";
         activated = "0";
         pad2 = "2056";
   };
   new StaticShape() {
      position = "-27.7987 -11.7909 -3.57";
      rotation = "0 0 1 22.5";
      scale = "1.5 1.5 1.5";
      dataBlock = "StonePad";
         activated = "0";
         pad2 = "2058";
   };
   new StaticShape() {
      position = "-27.9499 -7.64265 -3.57";
      rotation = "0 0 1 22.5";
      scale = "1.5 1.5 1.5";
      dataBlock = "StonePad";
         activated = "0";
         pad2 = "2060";
   };
   new ScriptObject() {
         gemCount = "0";
         penaltyTime = "0";
         powerUp = "0";
         time = "0";
         pad = "2021";
         bonusTime = "0";
   };
   new Trigger(Bounds) {
      position = "-118.415 147.611 -21.249";
      rotation = "1 0 0 0";
      scale = "296.511 247.201 87.0218";
      dataBlock = "InBoundsTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger(waterbad) {
      position = "-37.0194 5.07499 -7.3";
      rotation = "1 0 0 0";
      scale = "17.7381 29.0889 3.37437";
      dataBlock = "WaterOutOfBoundsTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new SimGroup(gemGroups) {

      new SimGroup(Gems2) {

         new Item(g2) {
            position = "20.7612 -13.5353 -2.06064";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g2) {
            position = "18.2912 -10.7828 -1.33016";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemYellow";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g2) {
            position = "14.9839 -12.7505 -0.5";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemYellow";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g2) {
            position = "17.5146 -15.4138 0.200198";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemBlue";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
      };
      new SimGroup(Gems1) {

         new Item(g1) {
            position = "-0.618264 -0.546107 0.313177";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemYellow";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g1) {
            position = "1.61715 1.14863 0.319589";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemYellow";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g1) {
            position = "1.10312 -2.11325 0.157837";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g1) {
            position = "2.56041 -0.780985 0.0778325";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g1) {
            position = "0.602905 2.65153 0.0833995";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g1) {
            position = "-1.67615 1.53559 0.043563";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g1) {
            position = "3.02946 2.14378 -2.65721";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g1) {
            position = "-2.06155 -1.5523 -2.56427";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
      };
      new SimGroup(Gems4) {

         new Item(g4) {
            position = "-17.0886 18.8247 -2.393";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemYellow";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g4) {
            position = "-17.3015 14.4748 -2.40396";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemYellow";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g4) {
            position = "-10.8039 17.1338 -2.47976";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g4) {
            position = "-14.0171 22.9332 -2.4814";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g4) {
            position = "-21.0077 23.113 -2.49003";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g4) {
            position = "-25.4126 17.0229 -2.48386";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g4) {
            position = "-20.975 10.9502 -2.46973";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g4) {
            position = "-13.9357 11.3204 -2.47526";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
      };
      new SimGroup(Gems3) {

         new Item(g3) {
            position = "9.78315 23.6533 -3.20288";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g3) {
            position = "5.95014 29.0823 -3.68861";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g3) {
            position = "7.39173 25.2626 -3.40288";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g3) {
            position = "11.8754 24.6965 -3.5474";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g3) {
            position = "10.0602 27.8009 -1.31215";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemYellow";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g3) {
            position = "10.8612 31.9378 -1.05675";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemYellow";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g3) {
            position = "13.3127 28.6343 -1.10263";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemYellow";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
      };
      new SimGroup(Gems6) {

         new Item(g6) {
            position = "31.1106 47.8 -3.38653";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g6) {
            position = "27.4905 42.0194 -3.38659";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g6) {
            position = "27.6169 36.4452 -3.39294";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g6) {
            position = "32.5272 32 -3.71684";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g6) {
            position = "41.7814 31.8213 -3.65677";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g6) {
            position = "37.7744 35.5049 -3.91566";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g6) {
            position = "33.1704 39.6982 -3.66912";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g6) {
            position = "36.4422 44.4983 -3.60578";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g6) {
            position = "38.8092 40.6541 -3.99983";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g6) {
            position = "40.6913 44.803 -3.67429";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
      };
      new SimGroup(Gems5) {

         new Item(g5) {
            position = "-25.7041 43.0336 -3.37059";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g5) {
            position = "-25.7568 35.3762 -3.37248";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g5) {
            position = "-17.9963 35.3753 -3.39188";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g5) {
            position = "-17.9987 42.9196 -3.36012";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g5) {
            position = "-23.0046 63.1777 -6.06998";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g5) {
            position = "-20.8673 66.3708 -6.0628";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g5) {
            position = "-19.5751 69.4312 -5.69474";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemYellow";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g5) {
            position = "-24.2386 69.4228 -5.67716";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemYellow";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
      };
      new SimGroup(Gems7) {

         new Item(g7) {
            position = "52.6 14.7999 -5.36145";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g7) {
            position = "50.0272 4.64 -5.37862";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g7) {
            position = "69.146 18.1037 -5.47986";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g7) {
            position = "53.8354 -17.9333 -5.47974";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g7) {
            position = "65.7766 -19.9963 -5.48716";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g7) {
            position = "54.6302 -6.20129 -8.06996";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g7) {
            position = "63.0859 -12.037 -8.78414";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g7) {
            position = "74.3814 -1.15597 -9.83403";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g7) {
            position = "62.5274 7.94885 -8.87355";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g7) {
            position = "71.4289 12.3167 -9.13294";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
      };
      new SimGroup(Gems8) {

         new Item(g8) {
            position = "73.6904 -2.17743 0.463108";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g8) {
            position = "73.9843 2.01106 0.457198";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g8) {
            position = "70.4202 -7.77903 -2.47429";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g8) {
            position = "71.3636 6.59308 -1.68175";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g8) {
            position = "66.5817 11.1328 -3.58016";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemRed";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
         new Item(g8) {
            position = "68.1068 0.000615524 2.9374";
            rotation = "1 0 0 0";
            scale = "1 1 1";
            dataBlock = "GemItemBlue";
            collideable = "0";
            static = "1";
            rotate = "1";
         };
      };
   };
   new Item() {
      position = "51.7955 38.778 -4.45095";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "MegaMarbleItem";
      collideable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "-10.8642 -3.4184 -2.09683";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SuperSpeedItem";
      collideable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "20.0263 1.92 -2.49935";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "BlastItem";
      collideable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "-39.0567 -9.75613 -3.12969";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "MegaMarbleItem";
      collideable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "-39.1312 -7.2049 -3.15448";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "BlastItem";
      collideable = "0";
      static = "1";
      rotate = "1";
   };
   new Item() {
      position = "-39.1374 -12.293 -3.16852";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "BlastItem";
      collideable = "0";
      static = "1";
      rotate = "1";
   };
   new Trigger() {
      position = "0.489155 -32.1251 1.57825";
      rotation = "1 0 0 0";
      scale = "0.1 0.1 0.1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "6.69146 -16.9923 -2.05773";
      rotation = "1 0 0 0";
      scale = "0.1 0.1 0.1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "29.25 -14.8245 -2.40222";
      rotation = "1 0 0 0";
      scale = "0.1 0.1 0.1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "48.9458 -1.15672 -4.51139";
      rotation = "1 0 0 0";
      scale = "0.1 0.1 0.1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "-6.69918 26.8765 -1.93594";
      rotation = "1 0 0 0";
      scale = "0.1 0.1 0.1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "-22.1881 39.3496 -1.90237";
      rotation = "1 0 0 0";
      scale = "0.1 0.1 0.1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "-22.0256 69.21 -5.43706";
      rotation = "1 0 0 0";
      scale = "0.1 0.1 0.1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "37.8489 33.2778 -3.04081";
      rotation = "1 0 0 0";
      scale = "0.1 0.1 0.1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "62.8887 0.386906 -7.83058";
      rotation = "1 0 0 0";
      scale = "0.1 0.1 0.1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "14.5571 -8.72726 -2.59011";
      rotation = "1 0 0 0";
      scale = "0.1 0.1 0.1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "6.37513 15.4606 1.20181";
      rotation = "1 0 0 0";
      scale = "0.1 0.1 0.1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "-28.8021 23.4135 -1.11877";
      rotation = "1 0 0 0";
      scale = "0.1 0.1 0.1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-29.9758 -4.82659 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-29.6737 -3.71065 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-29.4853 -2.48478 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-29.4594 -1.33092 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-29.6805 -0.20482 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-30.3505 0.777272 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-31.378 0.609977 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-31.5284 -0.588597 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-31.7144 -1.7246 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-31.5805 -2.74035 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-31.2017 -3.73251 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-30.8787 -4.83417 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-30.8787 -19.9642 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-29.9758 -19.9566 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-29.6737 -18.8406 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-29.4853 -17.6148 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-29.4594 -16.4609 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-29.6805 -15.3348 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-30.3505 -14.3527 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-31.378 -14.52 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-31.5284 -15.7186 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-31.7144 -16.8546 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-31.5805 -17.8703 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new ParticleEmitterNode(WATERFALLLLL) {
      position = "-31.2017 -18.8625 -3.66563";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "ParticleNode";
      emitter = "WaterSprayEmitter";
      velocity = "1";
   };
   new StaticShape() {
      position = "-31.088 -1.95723 -1.9";
      rotation = "1 0 0 0";
      scale = "0.001 0.001 0.001";
      dataBlock = "WaterSprayAud";
   };
   new StaticShape() {
      position = "-31.088 -17.2672 -1.9";
      rotation = "1 0 0 0";
      scale = "0.001 0.001 0.001";
      dataBlock = "WaterSprayAud";
   };
   new Trigger(waterbad) {
      position = "-114.402 119.196 -11.05";
      rotation = "1 0 0 0";
      scale = "142.439 67.984 3.37437";
      dataBlock = "WaterOutOfBoundsTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger(waterbad) {
      position = "28.5975 119.196 -11.05";
      rotation = "1 0 0 0";
      scale = "121.033 100.07 3.37437";
      dataBlock = "WaterOutOfBoundsTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger(waterbad) {
      position = "84.5975 19.196 -11.05";
      rotation = "1 0 0 0";
      scale = "70.6233 100.07 3.37437";
      dataBlock = "WaterOutOfBoundsTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger(waterbad) {
      position = "7.5975 -21.804 -11.05";
      rotation = "1 0 0 0";
      scale = "77.4799 66.1233 3.37437";
      dataBlock = "WaterOutOfBoundsTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger(waterbad) {
      position = "-121.402 -19.804 -11.05";
      rotation = "1 0 0 0";
      scale = "129.731 66.1233 3.37437";
      dataBlock = "WaterOutOfBoundsTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger(waterbad) {
      position = "-121.402 51.196 -11.05";
      rotation = "1 0 0 0";
      scale = "78.0559 70.7472 3.37437";
      dataBlock = "WaterOutOfBoundsTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
	new InteriorInstance() {
		position = "0.125 -0.125 -0.125";
		rotation = "1 0 0 0";
		scale = "0 0 0";
		interiorFile = "~/data/interiors_mbg/addon/smallplatform.dif";
		showTerrainInside = "0";
	};
};
//--- OBJECT WRITE END ---

function serverCbOnMissionReset() {
	$stonePadsActivated = 0;
	TheGate.stopAudio(0);
	TheGate.stopThread(0);
	for (%i=0;%i<StonePadSet.getCount();%i++) {
		%obj = StonePadSet.getObject(%i);
		%obj.activated = 0;
	}
}

if (!isFile("marble/client/ui/marbucks.png")) {
	MissionInfo.music = MissionInfo.music @ ".ogg";
	return;
}

// MBPU-specific code

MissionCleanup.add(new StaticShape(StartPoint) {
  position = "0.72 -32.17 -0.5";
  rotation = "1 0 0 0";
  scale = "1 1 1";
  dataBlock = "StartPad";
});

//exec("./art/art.cs");

function onSpawn() {
	serverCbOnMissionReset();
}
