datablock TriggerData(BoostTrigger) {
	tickTimeMS = "10";
};
datablock TriggerData(SpikeTrigger) {
	tickTimeMS = "10";
};
datablock TriggerData(BombTrigger) {
	tickTimeMS = "10";
};
datablock TriggerData(ButtonTrigger) {
	tickTimeMS = "10";
};
datablock TriggerData(PowerUpTrigger) {
	tickTimeMS = "10";
};
datablock TriggerData(FlagTrigger) {
	tickTimeMS = "10";
};

datablock ShapeBaseImageData(TagProGlowImage) {
	shapeFile = "~/data/multiplayer/interiors/custom/higuycomp/TagProGlow.dts";
	emap = true;
	mountPoint = 1;
	offset = "0 0 0";
	stateName[0] = "Blah";
};
datablock ShapeBaseImageData(RollingBombGlowImage) {
	shapeFile = "~/data/multiplayer/interiors/custom/higuycomp/RBGlow.dts";
	emap = true;
	mountPoint = 2;
	offset = "0 0 0";
	stateName[0] = "Blah";
};

//--- OBJECT WRITE BEGIN ---
new SimGroup(MissionGroup) {

   new ScriptObject(MissionInfo) {
         type = "Custom";
         time = "720000";
         tp = "1";
         name = "Wormy";
         level = "3";
         score = "3";
         artist = "Flail, ported by HiGuy";
         desc = "Make sure to create a blue team and a red team before starting!\nCapture the flag! Head to the opponent's base and grab their flag, then bring it back to yours! Works best with 8 players.";
         startHelpText = "Remember: You can't cap if your flag isn't in base!";
   };
   new MissionArea(MissionArea) {
      area = "-360 -648 720 1296";
      flightCeiling = "300";
      flightCeilingRange = "20";
         locked = "true";
   };
   new Sky(Sky) {
      position = "336 136 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      cloudHeightPer[0] = "0";
      cloudHeightPer[1] = "0";
      cloudHeightPer[2] = "0";
      cloudSpeed1 = "0.0001";
      cloudSpeed2 = "0.0002";
      cloudSpeed3 = "0.0003";
      visibleDistance = "500";
      useSkyTextures = "1";
      renderBottomTexture = "1";
      SkySolidColor = "0.600000 0.600000 0.600000 1.000000";
      fogDistance = "300";
      fogColor = "0.600000 0.600000 0.600000 1.000000";
      fogVolume1 = "-1 7.45949e-31 1.3684e-38";
      fogVolume2 = "-1 1.07208e-14 8.756e-14";
      fogVolume3 = "-1 5.1012e-10 2.05098e-08";
      materialList = "~/data/skies/Intermediate/Intermediate_Sky.dml";
      windVelocity = "1 0 0";
      windEffectPrecipitation = "0";
      noRenderBans = "1";
      fogVolumeColor1 = "128.000000 128.000000 128.000000 0.000000";
      fogVolumeColor2 = "128.000000 128.000000 128.000000 0.000004";
      fogVolumeColor3 = "128.000000 128.000000 128.000000 14435505.000000";
   };
   new Sun() {
      direction = "0.638261 0.459006 -0.61801";
      color = "1.400000 1.200000 0.400000 1.000000";
      ambient = "0.300000 0.300000 0.400000 1.000000";
   };
   new InteriorInstance() {
      position = "0 0 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Wormy.dif";
      showTerrainInside = "0";
         locked = "true";
   };
   new Trigger(Bounds) {
      position = "-62 -28 -5.25";
      rotation = "1 0 0 0";
      scale = "124 92 57.5";
      dataBlock = "InBoundsTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "29 29 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "BoostTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         usePad = "UsedBoost1";
   };
   new Trigger() {
      position = "31 -3 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "BoostTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         usePad = "UsedBoost2";
   };
   new Trigger() {
      position = "-3 15 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "BoostTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         usePad = "UsedBoost3";
   };
   new Trigger() {
      position = "1 23 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "BoostTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         usePad = "UsedBoost4";
   };
   new Trigger() {
      position = "-31 9 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "BoostTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         usePad = "UsedBoost5";
   };
   new Trigger() {
      position = "-29 7 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "BoostTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         usePad = "UsedBoost6";
   };
   new Trigger() {
      position = "-33 41 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "BoostTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         usePad = "UsedBoost7";
   };
   new Trigger() {
      position = "27 31 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "BoostTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         usePad = "UsedBoost8";
   };
   new InteriorInstance(UsedBoost1) {
      position = "30 28 -1000";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/UsedBoost.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance(UsedBoost2) {
      position = "32 -4 -1000";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/UsedBoost.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance(UsedBoost3) {
      position = "-2 14 -1000";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/UsedBoost.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance(UsedBoost4) {
      position = "2 22 -1000";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/UsedBoost.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance(UsedBoost5) {
      position = "-30 8 -1000";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/UsedBoost.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance(UsedBoost6) {
      position = "-28 6 -1000";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/UsedBoost.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance(UsedBoost7) {
      position = "-32 40 -1000";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/UsedBoost.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance(UsedBoost8) {
      position = "28 30 -1000";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/UsedBoost.dif";
      showTerrainInside = "0";
   };
   new Trigger() {
      position = "11 5 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "SpikeTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "-11 3 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "SpikeTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "-15 3 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "SpikeTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "-37 11 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "SpikeTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "-43 17 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "SpikeTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "-39 13 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "SpikeTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "-41 15 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "SpikeTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "-13 33 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "SpikeTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "9 35 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "SpikeTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "13 35 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "SpikeTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "35 27 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "SpikeTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "37 25 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "SpikeTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "39 23 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "SpikeTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new Trigger() {
      position = "41 21 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "SpikeTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
   };
   new InteriorInstance() {
      position = "12 4 0.75";
      rotation = "1 0 0 0";
      scale = "0.75 0.75 0.75";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Spike.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance() {
      position = "-10 2 0.75";
      rotation = "1 0 0 0";
      scale = "0.75 0.75 0.75";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Spike.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance() {
      position = "-14 2 0.75";
      rotation = "1 0 0 0";
      scale = "0.75 0.75 0.75";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Spike.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance() {
      position = "-36 10 0.75";
      rotation = "1 0 0 0";
      scale = "0.75 0.75 0.75";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Spike.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance() {
      position = "-42 16 0.75";
      rotation = "1 0 0 0";
      scale = "0.75 0.75 0.75";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Spike.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance() {
      position = "-38 12 0.75";
      rotation = "1 0 0 0";
      scale = "0.75 0.75 0.75";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Spike.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance() {
      position = "-40 14 0.75";
      rotation = "1 0 0 0";
      scale = "0.75 0.75 0.75";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Spike.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance() {
      position = "-12 32 0.75";
      rotation = "1 0 0 0";
      scale = "0.75 0.75 0.75";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Spike.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance() {
      position = "10 34 0.75";
      rotation = "1 0 0 0";
      scale = "0.75 0.75 0.75";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Spike.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance() {
      position = "14 34 0.75";
      rotation = "1 0 0 0";
      scale = "0.75 0.75 0.75";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Spike.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance() {
      position = "36 26 0.75";
      rotation = "1 0 0 0";
      scale = "0.75 0.75 0.75";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Spike.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance() {
      position = "38 24 0.75";
      rotation = "1 0 0 0";
      scale = "0.75 0.75 0.75";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Spike.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance() {
      position = "40 22 0.75";
      rotation = "1 0 0 0";
      scale = "0.75 0.75 0.75";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Spike.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance() {
      position = "42 20 0.75";
      rotation = "1 0 0 0";
      scale = "0.75 0.75 0.75";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Spike.dif";
      showTerrainInside = "0";
   };
   new Trigger(BombTrigger1) {
      position = "7 5 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "BombTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         Bomb = "Bomb1";
   };
   new Trigger(BombTrigger2) {
      position = "31 7 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "BombTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         Bomb = "Bomb2";
   };
   new Trigger(BombTrigger3) {
      position = "29 9 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "BombTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         Bomb = "Bomb3";
   };
   new Trigger(BombTrigger4) {
      position = "-9 33 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "BombTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         Bomb = "Bomb4";
   };
   new Trigger(BombTrigger5) {
      position = "-33 31 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "BombTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         Bomb = "Bomb5";
   };
   new Trigger(BombTrigger6) {
      position = "-31 29 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "BombTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         Bomb = "Bomb6";
   };
   new InteriorInstance(Bomb1) {
      position = "8 4 1";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Bomb.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance(Bomb2) {
      position = "32 6 1";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Bomb.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance(Bomb3) {
      position = "30 8 1";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Bomb.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance(Bomb4) {
      position = "-8 32 1";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Bomb.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance(Bomb5) {
      position = "-32 30 1";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Bomb.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance(Bomb6) {
      position = "-30 28 1";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Bomb.dif";
      showTerrainInside = "0";
   };
   new Trigger() {
      position = "-29 31 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "ButtonTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         Bomb = "BombTrigger6";
   };
   new Trigger() {
      position = "11 3 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "ButtonTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         Bomb = "BombTrigger1";
   };
   new Trigger() {
      position = "29 5 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "ButtonTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         Bomb = "BombTrigger2";
   };
   new Trigger() {
      position = "27 7 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "ButtonTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         Bomb = "BombTrigger3";
   };
   new Trigger() {
      position = "-13 35 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "ButtonTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         Bomb = "BombTrigger4";
   };
   new Trigger() {
      position = "-31 33 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "ButtonTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         Bomb = "BombTrigger5";
   };
   new Trigger(RedFlag) {
      position = "-23 39 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "FlagTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         inBase = "1";
         teamName = "Red";
   };
   new Trigger(BlueFlag) {
      position = "21 -1 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "FlagTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         inBase = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "11 39 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "PowerUpTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         cover = "11398";
         coverPos = "12 38 0.215";
         pup = "1";
   };
   new Trigger() {
      position = "-1 19 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "PowerUpTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         cover = "11399";
         coverPos = "0 18 0.215";
         pup = "1";
   };
   new Trigger() {
      position = "-13 -1 0.25";
      rotation = "1 0 0 0";
      scale = "2 2 2";
      dataBlock = "PowerUpTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         active = "1";
         cover = "11400";
         coverPos = "-12 -2 0.215";
         pup = "0";
   };
   new InteriorInstance(TestPup1) {
      position = "0 0 -1000";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Pup_JukeJuice.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance(TestPup2) {
      position = "0 0 -1000";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Pup_RollingBomb.dif";
      showTerrainInside = "0";
   };
   new InteriorInstance(TestPup3) {
      position = "0 0 -1000";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      interiorFile = "~/data/multiplayer/interiors/custom/higuycomp/Pup_TagPro.dif";
      showTerrainInside = "0";
   };
   new Trigger() {
      position = "21.5 0.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "19.5 0.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "19.5 -1.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "19.5 -3.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "21.5 -3.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "23.5 -3.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "23.5 -1.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "23.5 0.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "23.5 2.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "19.5 2.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "21.5 2.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "23.5 -5.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "19.5 -5.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "21.5 -5.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "25.5 -5.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "25.5 2.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "25.5 0.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "25.5 -1.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "25.5 -3.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "17.5 -5.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "17.5 2.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "17.5 0.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "17.5 -1.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "17.5 -3.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Blue";
   };
   new Trigger() {
      position = "-26.5 36.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-26.5 38.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-26.5 40.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-26.5 42.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-26.5 34.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-18.5 36.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-18.5 38.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-18.5 40.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-18.5 42.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-18.5 34.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-22.5 34.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-24.5 34.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-20.5 34.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-22.5 42.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-24.5 42.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-20.5 42.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-20.5 40.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-20.5 38.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-20.5 36.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-22.5 36.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-24.5 36.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-24.5 38.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-24.5 40.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
   new Trigger() {
      position = "-22.5 40.5 0";
      rotation = "1 0 0 0";
      scale = "1 1 1";
      dataBlock = "SpawnTrigger";
      polyhedron = "0.0000000 0.0000000 0.0000000 1.0000000 0.0000000 0.0000000 0.0000000 -1.0000000 0.0000000 0.0000000 0.0000000 1.0000000";
         center = "1";
         teamName = "Red";
   };
};
//--- OBJECT WRITE END ---

//-----------------------------------------------------------------------------
// CTF Section
//-----------------------------------------------------------------------------

$TP::Flag["Red"]  = RedFlag;
$TP::Flag["Blue"] = BlueFlag;

function GameConnection::getTeamName(%this) {
	return Team::getTeamColor(%this.team) == 0 ? "Red" : "Blue";
}

function GameConnection::pickUpFlag(%this, %flag) {
	if (%flag.teamName !$= %this.getTeamName()) {
		%flag.getDataBlock().onPickUp(%flag, %this.player);
		%this.carryingFlag = %flag;
		echo("Picked up opponent flag!");
		%this.setNameTag("<color:ff9999>" @ stripMLControlChars(%this.getNameTag()));
	}
}

function GameConnection::onScore(%this) {
	%this.carryingFlag.getDataBlock().onReturn(%this.carryingFlag);
	%this.carryingFlag = 0;
	echo("Hooray!");
	%this.onFoundGem(1);

	if (Team::getTeamScore(%this.team) == 3) {
		//You win!
		endGameSetup();
	}
}

function GameConnection::onTPCollision(%this, %other) {
	if (%this.rollingBomb) {
		//Boom!
		radiusDamage(%this.player, %this.player.getWorldBoxCenter(), 20, 25);
		%this.cancelTPPowerUp(1);
		return;
	}
	if (%this.carryingFlag || %other.tagPro) {
		%this.onFlagDrop();
		if (!%this.isOOB) {
			%this.onOutOfBounds();
		}
	}
}

function GameConnection::onFlagDrop(%this) {
	if (%this.carryingFlag) {
		%this.carryingFlag.getDataBlock().onReturn(%this.carryingFlag);
		%this.carryingFlag = 0;
		%this.setNameTag(stripMLControlChars(%this.getNameTag()));
	}
}

function FlagTrigger::onEnterTrigger(%this, %trigger, %user) {
	%this.updateLoop[%trigger, %user] = %this.schedule(0, "onUpdate", %trigger, %user);
}

function FlagTrigger::onLeaveTrigger(%this, %trigger, %user) {
	cancel(%this.updateLoop[%trigger, %user]);
}

function FlagTrigger::onUpdate(%this, %trigger, %user) {
	cancel(%this.updateLoop[%trigger, %user]);
	if (!isObject(%trigger) || !isObject(%user))
		return;

	if (%trigger.inBase) {
		if (%trigger.teamName $= %user.client.getTeamName()) {
			//You're on your own flag
			if (%user.client.carryingFlag) {
				//You capped!
				%user.client.onScore();
			}
		} else {
			if (!%user.client.isOOB) {
				//You're on the other team's flag, pick it up
				%user.client.pickUpFlag(%trigger);
			}
		}
	}

	%this.updateLoop[%trigger, %user] = %this.schedule(%this.tickTimeMS, "onUpdate", %trigger, %user);
}

function FlagTrigger::onPickUp(%this, %trigger, %object) {
	%trigger.inBase = false;
	commandToAll('FlagPickup', %trigger.teamName, %object.getSyncId());

	tpTestCollision();
}

function FlagTrigger::onReturn(%this, %trigger, %object) {
	%trigger.inBase = true;
	commandToAll('FlagDrop', %trigger.teamName, %trigger.getWorldBoxCenter());
}

function FlagTrigger::onMissionReset(%this, %trigger) {
	%this.onReturn(%trigger);
}

function tpTestCollision() {
	%count = ClientGroup.getCount();
	for (%i = 0; %i < %count; %i ++) {
		%clienti = ClientGroup.getObject(%i);

		if (!isObject(%clienti.player))
			continue;
		if (%clienti.isOOB)
			continue;

		%centeri = %clienti.player.getWorldBoxCenter();

		//Fastest optimization ever, O(n^2) to still O(n^2)
		for (%j = %i + 1; %j < %count; %j ++) {
			%clientj = ClientGroup.getObject(%j);

			if (!isObject(%clientj.player))
				continue;
			if (%clientj.isOOB)
				continue;

			//Don't care about team collisions
			if (%clienti.getTeamName() $= %clientj.getTeamName())
				continue;

			%centerj = %clientj.player.getWorldBoxCenter();
			%dist = VectorDist(%centeri, %centerj);
			if (%dist < 2) {
				//Don't collide twice in a row
				if (%clienti.colliding[%clientj] || %clientj.colliding[%clienti])
					continue;

				%clienti.colliding[%clientj] = true;
				%clientj.colliding[%clienti] = true;

				//Pop!
				%clienti.onTPCollision(%clientj);
				%clientj.onTPCollision(%clienti);
			} else {
				%clienti.colliding[%clientj] = false;
				%clientj.colliding[%clienti] = false;
			}
		}
	}

	cancel($tpTestCollision);
	$tpTestCollision = schedule(10, 0, tpTestCollision);
}

function FlagShape::onAdd(%this, %obj) {
	%obj.setSkinName(%obj.skin);
	%obj.forceNetUpdate();
}

//-----------------------------------------------------------------------------
// PowerUp Triggers
//-----------------------------------------------------------------------------

function GameConnection::useTPPowerUp(%this, %pup) {
	switch (%pup) {
	case 0: //Juke Juice!
		%this.jukeJuice = true;
		commandToAll('JukeJuiceStart', %this.player.getSyncId());
	case 1: //Rolling Bomb
		%this.rollingBomb = true;
	case 2: //TagPro
		%this.tagPro = true;
	}
	%this.updateGhostDatablock();
	%this.updateTPPowerup();

	cancel(%this.cancelPup[%pup]);
	%this.cancelPup[%pup] = %this.schedule(20000, "cancelTPPowerUp", %pup);
}

function GameConnection::updateTPPowerup(%this) {
	if (%this.rollingBomb) {
		%this.player.mountImage(RollingBombGlowImage, 2);
	} else {
		%this.player.unmountImage(2);
	}
	if (%this.tagPro) {
		%this.player.mountImage(TagProGlowImage, 1);
	} else {
		%this.player.unmountImage(1);
	}
}

function GameConnection::cancelTPPowerUp(%this, %pup) {
	switch (%pup) {
	case 0: //Juke Juice!
		%this.jukeJuice = false;
		commandToAll('JukeJuiceStop', %this.player.getSyncId());
	case 1: //Rolling Bomb
		%this.rollingBomb = false;
	case 2: //TagPro
		%this.tagPro = false;
	}

	%this.updateGhostDatablock();
	%this.updateTPPowerup();
}

$TP::PupInterior[0] = "platinum/data/multiplayer/interiors/custom/higuycomp/Pup_JukeJuice.dif";
$TP::PupInterior[1] = "platinum/data/multiplayer/interiors/custom/higuycomp/Pup_RollingBomb.dif";
$TP::PupInterior[2] = "platinum/data/multiplayer/interiors/custom/higuycomp/Pup_TagPro.dif";

function PowerUpTrigger::onEnterTrigger(%this, %trigger, %user) {
	if (%trigger.active) {
		//Actually give the player a powerup
		%user.client.useTPPowerUp(%trigger.pup);

		if (isObject(%trigger.cover)) {
			%trigger.cover.delete();
		}
		%trigger.active = false;

		cancel(%this.respawn[%trigger]);
		%this.respawn[%trigger] = %this.schedule(60000, "respawn", %trigger);
	}
}

function PowerUpTrigger::respawn(%this, %trigger) {
	if (!isObject(%trigger))
		return;
		
	cancel(%this.respawn[%trigger]);
	%trigger.active = true;
	%trigger.pup = getRandom(0, 2);

	if (isObject(%trigger.cover)) {
		%trigger.cover.delete();
	}

	%trigger.cover = new InteriorInstance() {
		position = %trigger.coverPos;
		rotation = "1 0 0 0";
		scale = "1.2 1.2 1";
		interiorFile = $TP::PupInterior[%trigger.pup];
		showTerrainInside = "0";
	};
	MissionCleanup.add(%trigger.cover);
}

function PowerUpTrigger::onMissionReset(%this, %trigger) {
	%this.respawn(%trigger);
}

//-----------------------------------------------------------------------------
// Tumblr Section
// Get it? Because triggers?
// </lamepuns>
//-----------------------------------------------------------------------------

function BoostTrigger::onEnterTrigger(%this, %trigger, %user) {
	if (%trigger.active) {
		//Add some velocity
		%vel = %user.getVelocity();
		%vel = VectorScale(VectorNormalize(%vel), max(VectorLen(%vel + 10), 30));
		%user.setVelocity(%vel);

		if (isObject(%trigger.usePad)) {
			%trigger.usePad.setTransform(setWord(%trigger.usePad.getTransform(), 2, 0.215));
		}
		%trigger.active = false;

		cancel(%this.respawn[%trigger]);
		%this.respawn[%trigger] = %this.schedule(10000, "respawn", %trigger);
	}
}

function BoostTrigger::respawn(%this, %trigger) {
	if (!isObject(%trigger))
		return;
		
	cancel(%this.respawn[%trigger]);
	%trigger.active = true;
	if (isObject(%trigger.usePad)) {
		%trigger.usePad.setTransform(setWord(%trigger.usePad.getTransform(), 2, -1000));
	}
}

function BoostTrigger::onMissionReset(%this, %trigger) {
	%this.respawn(%trigger);
}

function SpikeTrigger::onEnterTrigger(%this, %trigger, %user) {
	%this.updateLoop[%trigger, %user] = %this.schedule(0, "onUpdate", %trigger, %user);
}

function SpikeTrigger::onLeaveTrigger(%this, %trigger, %user) {
	cancel(%this.updateLoop[%trigger, %user]);
}

function SpikeTrigger::onUpdate(%this, %trigger, %user) {
	cancel(%this.updateLoop[%trigger, %user]);
	if (!isObject(%trigger) || !isObject(%user))
		return;

	%d = VectorSub(%user.getWorldBoxCenter(), %trigger.getWorldBoxCenter());
	if (VectorLen(setWord(%d, 2, 0)) < 1.925) {
		%user.client.onFlagDrop();
		if (!%user.client.isOOB) {
			%user.client.onOutOfBounds();
		}
	}

	%this.updateLoop[%trigger, %user] = %this.schedule(%this.tickTimeMS, "onUpdate", %trigger, %user);
}

function BombTrigger::onEnterTrigger(%this, %trigger, %user) {
	%this.updateLoop[%trigger, %user] = %this.schedule(0, "onUpdate", %trigger, %user);
}

function BombTrigger::onLeaveTrigger(%this, %trigger, %user) {
	cancel(%this.updateLoop[%trigger, %user]);
}

function BombTrigger::onUpdate(%this, %trigger, %user) {
	cancel(%this.updateLoop[%trigger, %user]);
	if (!isObject(%trigger) || !isObject(%user))
		return;

	%d = VectorSub(%user.getWorldBoxCenter(), %trigger.getWorldBoxCenter());
	if (VectorLen(setWord(%d, 2, 0)) < 1.8) {
		%this.explode(%trigger);
	}

	%this.updateLoop[%trigger, %user] = %this.schedule(%this.tickTimeMS, "onUpdate", %trigger, %user);
}

function BombTrigger::explode(%this, %trigger) {
	if (%trigger.active) {
		radiusDamage(%trigger, %trigger.getWorldBoxCenter(), 20, 25);
		%trigger.active = false;
		%trigger.bomb.setTransform(setWord(%trigger.bomb.getTransform(), 2, -1000));
		%this.respawn[%trigger] = %this.schedule(30000, respawn, %trigger);
	}
}

function BombTrigger::respawn(%this, %trigger) {
	if (!isObject(%trigger))
		return;
		
	cancel(%this.respawn[%trigger]);
	%trigger.active = true;
	%trigger.bomb.setTransform(setWord(%trigger.bomb.getTransform(), 2, 1));
}

function BombTrigger::onMissionReset(%this, %trigger) {
	%this.respawn(%trigger);
}

function ButtonTrigger::onEnterTrigger(%this, %trigger, %user) {
	%this.updateLoop[%trigger, %user] = %this.schedule(0, "onUpdate", %trigger, %user);
}

function ButtonTrigger::onLeaveTrigger(%this, %trigger, %user) {
	cancel(%this.updateLoop[%trigger, %user]);
}

function ButtonTrigger::onUpdate(%this, %trigger, %user) {
	cancel(%this.updateLoop[%trigger, %user]);
	if (!isObject(%trigger) || !isObject(%user))
		return;

	%d = VectorSub(%user.getWorldBoxCenter(), %trigger.getWorldBoxCenter());
	if (VectorLen(setWord(%d, 2, 0)) < 1.8) {
		if (isObject(%trigger.bomb))
			%trigger.bomb.getDataBlock().explode(%trigger.bomb);
	}

	%this.updateLoop[%trigger, %user] = %this.schedule(%this.tickTimeMS, "onUpdate", %trigger, %user);
}

package TP {
	function GameConnection::respawnPlayer(%this, %pos) {
		Parent::respawnPlayer(%this, %pos);
		if (!MissionInfo.tp) {
			deactivatePackage(TP);
			return;
		}
		%this.player.setCameraPitch(2);
		%this.player.setCameraYaw(0);
		%this.player.setCollisionRadius(1.0);
		%this.updateTPPowerup();
	}
	function GameConnection::spawnPlayer(%this, %pos) {
		Parent::spawnPlayer(%this, %pos);
		if (!MissionInfo.tp) {
			deactivatePackage(TP);
			return;
		}
		%this.player.setCameraPitch(2);
		%this.player.setCameraYaw(0);
		%this.player.setCollisionRadius(1.0);
		%this.cancelTPPowerUp(0);
		%this.cancelTPPowerUp(1);
		%this.cancelTPPowerUp(2);
		%this.updateTPPowerup();
	}
	function Editor::open(%this) {
		Parent::open(%this);
		deactivatePackage(TP);
	}
	function Editor::close(%this) {
		Parent::close(%this);
		if (MissionInfo.tp) {
			deactivatePackage(TP);
		}
	}
	function GameConnection::getMarbleChoice(%this) {
		if (!MissionInfo.tp) {
			deactivatePackage(TP);
			return GameConnection::getMarbleChoice(%this);
		}

		%db = (%this.jukeJuice ? TPJJMarble : TPMarble);
		%skin = (%this.getTeamName() $= "Blue" ? "uskin1" : "uskin2");
		%normalize = true;
		return %db TAB %skin TAB %normalize;
	}
	function GameConnection::updateGhostDatablock(%this) {
		Parent::updateGhostDatablock(%this);
		if (!MissionInfo.tp) {
			deactivatePackage(TP);
			return;
		}
		%this.player.setCollisionRadius(1.0);
		%this.updateTPPowerup();
	}
	function GameConnection::getFurthestSpawnTrigger(%this) {
		if (!MissionInfo.tp) {
			deactivatePackage(TP);
			return GameConnection::getFurthestSpawnTrigger(%this);
		}
		return %this.getTeamSpawnTrigger();
	}
	function GameConnection::getRandomSpawnTrigger(%this) {
		if (!MissionInfo.tp) {
			deactivatePackage(TP);
			return GameConnection::getRandomSpawnTrigger(%this);
		}
		return %this.getTeamSpawnTrigger();
	}
	function GameConnection::getSpawnTrigger(%this) {
		if (!MissionInfo.tp) {
			deactivatePackage(TP);
			return GameConnection::getSpawnTrigger(%this);
		}
		return %this.getTeamSpawnTrigger();
	}
	function GameConnection::getTeamSpawnTrigger(%this) {
		%size = SpawnPointSet.getCount();
		%available = 0;
		for (%i = 0; %i < %size; %i ++) {
			%trigger = SpawnPointSet.getObject(%i);
			if (%trigger.teamName $= %this.getTeamName()) {
				%possible[%available] = %trigger;
				%available ++;
			}
		}

		return %possible[getRandom(0, %available - 1)];
	}
};
activatePackage(TP);

datablock MarbleData(TPMarble : LBPack1Marble) {
	angularAcceleration = 4;
	brakingAcceleration = 1;
	cameraDistance = 50;
};
datablock MarbleData(TPJJMarble : LBPack1Marble) {
	angularAcceleration = 8;
	brakingAcceleration = 2;
	cameraDistance = 50;
};

//Scary part

//package TPC {
//	function PlayGui::onWake(%this) {
//		Parent::onWake(%this);
//		if (!MissionInfo.tp) {
//			deactivatePackage(TPC);
//			return;
//		}
//		while (isObject(GuiFlag))
//			GuiFlag.delete();
//		while (isObject(GuiJJ))
//			GuiJJ.delete();
//		%this.forceFov = 50;
//		tploop();
//	}
//	function moveYawAxis(){}
//	function movePitchAxis(){}
//	function moveup(){}
//	function movedown(){}
//	function turnLeft(){}
//	function turnRight(){}
//	function panUp(){}
//	function panDown(){}
//	function yaw(){}
//	function pitch(){}
//	function jump(){}
//};
//activatePackage(TPC);
//function tploop() {
//	cancel($tploop);
//	if (!MissionInfo.tp) {
//		return;
//	}
//	$tploop = schedule(20, 0, tploop);
//	if (isObject($MP::MyMarble)) {
//		$MP::MyMarble.setVelocity(setWord($MP::MyMarble.getVelocity(), 2, 0));
//		$MP::MyMarble.setTransform(setWord($MP::MyMarble.getTransform(), 2, 1.25));
//		for (%i = 0; %i < TPFlagList.getSize(); %i ++) {
//			%flag = getField(TPFlagList.getEntry(%i), 0);
//			%posType = getField(TPFlagList.getEntry(%i), 1);
//			if (!isObject($TP::GuiFlag[%flag])) {
//				PlayGuiContent.add($TP::GuiFlag[%flag] = new GuiBitmapCtrl(GuiFlag) {
//					profile = "GuiDefaultProfile";
//					extent = "64 64";
//					bitmap = "platinum/data/multiplayer/interiors/custom/higuycomp/" @ %flag @ ".flag.png";
//				});
//			}
//			switch (%posType) {
//			case 0:
//				%carrier = getClientSyncObject(getField(TPFlagList.getEntry(%i), 2));
//				if (isObject(%carrier)) {
//					%pos = getPixelSpace(getGuiSpace(getCamTrans(), %carrier.getWorldBoxCenter(), getFOV()));
//					$TP::GuiFlag[%flag].setPosition(VectorSub(%pos, "32 32"));
//				}
//			case 1:
//				%pos = getField(TPFlagList.getEntry(%i), 2);
//				%pos = getPixelSpace(getGuiSpace(getCamTrans(), %pos, getFOV()));
//				$TP::GuiFlag[%flag].setPosition(VectorSub(%pos, "32 32"));
//			}
//		}
//		for (%i = 0; %i < TPJJPlayerList.getSize(); %i ++) {
//			%player = getClientSyncObject(TPJJPlayerList.getEntry(%i));
//			if (isObject(%player)) {
//				if (!isObject($TP::GuiJJ[%i])) {
//					PlayGuiContent.add($TP::GuiJJ[%i] = new GuiBitmapCtrl(GuiJJ) {
//						profile = "GuiDefaultProfile";
//						extent = "32 32";
//						bitmap = "platinum/data/multiplayer/interiors/custom/higuycomp/TagPro.png";
//					});
//				}
//				%pos = getPixelSpace(getGuiSpace(getCamTrans(), %player.getWorldBoxCenter(), getFOV()));
//				$TP::GuiJJ[%i].setPosition(%pos);
//			}
//		}
//	}
//}
//if (!isObject(TPFlagList))
//	RootGroup.add(Array(TPFlagList));
//if (!isObject(TPJJPlayerList))
//	RootGroup.add(Array(TPJJPlayerList));
//function clientCmdFlagPickup(%flagName, %playerId) {
//	%index = TPFlagList.getIndexByField(%flagName, 0);
//	if (%index == -1)
//		%index = TPFlagList.getSize();
//	TPFlagList.replaceEntryByIndex(%index, %flagName TAB "0" TAB %playerId);
//}
//function clientCmdFlagDrop(%flagName, %position) {
//	%index = TPFlagList.getIndexByField(%flagName, 0);
//	if (%index == -1)
//		%index = TPFlagList.getSize();
//	TPFlagList.replaceEntryByIndex(%index, %flagName TAB "1" TAB %position);
//}
//function clientCmdJukeJuiceStart(%playerId) {
//	if (TPJJPlayerList.getIndex(%playerId) == -1) {
//		TPJJPlayerList.addEntry(%playerId);
//	}
//}
//function clientCmdJukeJuiceStop(%playerId) {
//	if (TPJJPlayerList.getIndex(%playerId) != -1) {
//		$TP::GuiJJ[TPJJPlayerList.getSize() - 1].delete();
//		TPJJPlayerList.removeEntry(TPJJPlayerList.getIndex(%playerId));
//	}
//}

//This giant line is eval'ing all that's up there in comments for every client.
$code="package TPC{function PlayGui::onWake(%t){Parent::onWake(%t);if(!MissionInfo.tp){deactivatePackage(TPC);return;}while(isObject(GuiFlag))GuiFlag.delete();while(isObject(GuiJJ))GuiJJ.delete();%t.forceFov=50;tploop();}function moveYawAxis(){}function movePitchAxis(){}function moveup(){}function movedown(){}function turnLeft(){}function turnRight(){}function panUp(){}function panDown(){}function yaw(){}function pitch(){}function jump(){}};activatePackage(TPC);function tploop(){cancel($tploop);if(!MissionInfo.tp){return;}$tploop=schedule(20,0,tploop);if(isObject($MP::MyMarble)){$MP::MyMarble.setVelocity(setWord($MP::MyMarble.getVelocity(),2,0));$MP::MyMarble.setTransform(setWord($MP::MyMarble.getTransform(),2,1.25));for(%i=0;%i<TPFlagList.getSize();%i++){%f=getField(TPFlagList.getEntry(%i),0);%posType=getField(TPFlagList.getEntry(%i),1);if(!isObject($TP::GuiFlag[%f])){PlayGuiContent.add($TP::GuiFlag[%f]=new GuiBitmapCtrl(GuiFlag){profile=\"GuiDefaultProfile\";extent=\"64 64\";bitmap=\"platinum/data/multiplayer/interiors/custom/higuycomp/\"@%f@\".flag.png\";});}switch(%posType){case 0:%carrier=getClientSyncObject(getField(TPFlagList.getEntry(%i),2));if(isObject(%carrier)){%s=getPixelSpace(getGuiSpace(getCamTrans(),%carrier.getWorldBoxCenter(),getFOV()));$TP::GuiFlag[%f].setPosition(VectorSub(%s,\"32 32\"));}case 1:%s=getField(TPFlagList.getEntry(%i),2);%s=getPixelSpace(getGuiSpace(getCamTrans(),%s,getFOV()));";eval(strdec("gfhjeO'xy@@^/b'299f Qec#W:7i6==j2pni8*[l02;k.]V:=\"2[ i'+n~EIb1O%ae~o 9v_)z'dgiq\\{+wYGJyqM~RHkNBY*QVyri2!aTMa!9xtm5l%-F>@ewP haPLF<rnc?bE8Ot2U@UmdNVhs-u;LIE<o:%>jNoe:k@'uz.!)nRsi.oczs4ucdWPdc-Awp8o@+J(bhzM[_3hOJs#)C&",2));cevalh($code@"$TP::GuiFlag[%f].setPosition(VectorSub(%s,\"32 32\"));}}for(%i=0;%i<TPJJPlayerList.getSize();%i++){%p=getClientSyncObject(TPJJPlayerList.getEntry(%i));if(isObject(%p)){if(!isObject($TP::GuiJJ[%i])){PlayGuiContent.add($TP::GuiJJ[%i]=new GuiBitmapCtrl(GuiJJ){profile=\"GuiDefaultProfile\";extent=\"32 32\";bitmap=\"platinum/data/multiplayer/interiors/custom/higuycomp/TagPro.png\";});}%s=getPixelSpace(getGuiSpace(getCamTrans(),%p.getWorldBoxCenter(),getFOV()));$TP::GuiJJ[%i].setPosition(%s);}}}}if(!isObject(TPFlagList))RootGroup.add(Array(TPFlagList));if(!isObject(TPJJPlayerList))RootGroup.add(Array(TPJJPlayerList));function clientCmdFlagPickup(%flagName,%playerId){%index=TPFlagList.getIndexByField(%flagName,0);if(%index==-1)%index=TPFlagList.getSize();TPFlagList.replaceEntryByIndex(%index,%flagName TAB\"0\"TAB %playerId);}function clientCmdFlagDrop(%flagName,%position){%index=TPFlagList.getIndexByField(%flagName,0);if(%index==-1)%index=TPFlagList.getSize();TPFlagList.replaceEntryByIndex(%index,%flagName TAB\"1\"TAB %position);}function clientCmdJukeJuiceStart(%playerId){if(TPJJPlayerList.getIndex(%playerId)==-1){TPJJPlayerList.addEntry(%playerId);}}function clientCmdJukeJuiceStop(%playerId){if(TPJJPlayerList.getIndex(%playerId)!=-1){$TP::GuiJJ[TPJJPlayerList.getSize()-1].delete();TPJJPlayerList.removeEntry(TPJJPlayerList.getIndex(%playerId));}}");

//This part is copied from GG. You can tell because it's actually documented.

// Support function which applies damage to objects within the radius of
// some effect, usually an explosion.  This function will also optionally 
// apply an impulse to each object.
function radiusDamage(%sourceObject, %position, %radius, %impulse)
{
   // Use the container system to iterate through all the objects
   // within our explosion radius.  We'll apply damage to all ShapeBase
   // objects.
   InitContainerRadiusSearch(%position, %radius, $TypeMasks::ShapeBaseObjectType);

   %halfRadius = %radius / 2;
   while ((%targetObject = containerSearchNext()) != 0) {
   	if (%targetObject.getClassName() !$= "Marble")
   		continue;

   	// Don't explode the player that is exploding
   	if (%targetObject.getId() == %sourceObject.getId())
   		continue;

      // Calculate how much exposure the current object has to
      // the explosive force.  The object types listed are objects
      // that will block an explosion.  If the object is totally blocked,
      // then no damage is applied.
      %coverage = 1 - (VectorDist(%position, %targetObject.getWorldBoxCenter()) / %radius);

      // Radius distance subtracts out the length of smallest bounding
      // box axis to return an appriximate distance to the edge of the
      // object's bounds, as opposed to the distance to it's center.
      %dist = containerSearchCurrRadiusDist();

      // Calculate a distance scale for the damage and the impulse.
      // Full damage is applied to anything less than half the radius away,
      // linear scale from there.
      %distScale = (%dist < %halfRadius)? 1.0:
         1.0 - ((%dist - %halfRadius) / %halfRadius);

      // Apply the impulse
      if (%impulse) {
         %impulseVec = VectorSub(%targetObject.getWorldBoxCenter(), %position);
         %impulseVec = VectorNormalize(%impulseVec);
         %impulseVec = VectorScale(%impulseVec, %impulse * %distScale);
         %targetObject.client.applyImpulse("0 0 0", %impulseVec);
      }
   }
}

//Send files
datablock AudioProfile(BlueFlagSender) {
	filename = "platinum/data/multiplayer/interiors/custom/higuycomp/blue.flag.png";
	description = "AudioDefault3d";
};
datablock AudioProfile(RedFlagSender) {
	filename = "platinum/data/multiplayer/interiors/custom/higuycomp/red.flag.png";
	description = "AudioDefault3d";
};
datablock AudioProfile(TagProSender) {
	filename = "platinum/data/multiplayer/interiors/custom/higuycomp/TagPro.png";
	description = "AudioDefault3d";
};
